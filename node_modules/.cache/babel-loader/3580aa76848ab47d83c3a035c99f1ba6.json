{"ast":null,"code":"var _jsxFileName = \"/Users/manuel/Documents/CA/ca-fe/src/components/Comparison.js\";\nimport React, { Component } from 'react';\nimport BusinessService from '../services/business';\nimport ProductService from '../services/product';\nimport CoverService from '../services/cover';\nimport ProductCard from './ProductCard';\n\nclass Comparison extends Component {\n  constructor(props) {\n    super(props);\n    this.businessService = new BusinessService();\n    this.productService = new ProductService();\n    this.coverService = new CoverService();\n    this.businessList = [];\n    this.state = {\n      businesses: []\n    };\n  }\n\n  componentWillMount() {\n    this.businessService.getAllBusinesses().then(response => {\n      this.businessList = response.data;\n      console.log('RESPONSE: ', this.businessList);\n      this.businessList.forEach((business, businessIndex) => {\n        this.productService.getProductsByBusiness(business._id).then(response => {\n          business['products'] = response.data;\n          console.log('RESPONSE: ', business['products']);\n          business.products.forEach((product, productIndex) => {\n            this.coverService.getCoverByProduct(product._id).then(response => {\n              product['covers'] = response.data;\n              console.log('RESPONSE: ', product['covers']);\n              console.log('INDEX: ', businessIndex);\n              console.log('COMPARISON: ', this.businessList.length - 1);\n              console.log('INDEX: ', productIndex);\n              console.log('COMPARISON: ', this.businessList.length - 1);\n\n              if (businessIndex === business.products.length - 1) {\n                console.log('ENTRE AL PRIMER IF');\n\n                if (productIndex === business.products.length - 1) {\n                  console.log('ENTRE AL SEGUNDO IF');\n                  this.setState({\n                    businesses: this.businessList\n                  });\n                }\n              }\n            }, error => {\n              console.log('[ERROR]', error);\n            });\n          });\n        }, error => {\n          console.log('[ERROR]', error);\n        });\n      });\n    }, error => {\n      console.log('[ERROR]', error);\n    });\n  }\n\n  render() {\n    let cards = [];\n    this.state.businesses.forEach(business => {\n      this.state.businesses.products.forEach(product => {\n        cards.push(this.buildCard(business, product));\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 16\n      }\n    }, cards);\n  }\n\n  buildCard(business, product) {\n    return /*#__PURE__*/React.createElement(ProductCard, {\n      business: business.name,\n      insurance: product.insurance,\n      payment: product.anualPayment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 16\n      }\n    });\n  }\n\n}\n\nexport default Comparison;","map":{"version":3,"sources":["/Users/manuel/Documents/CA/ca-fe/src/components/Comparison.js"],"names":["React","Component","BusinessService","ProductService","CoverService","ProductCard","Comparison","constructor","props","businessService","productService","coverService","businessList","state","businesses","componentWillMount","getAllBusinesses","then","response","data","console","log","forEach","business","businessIndex","getProductsByBusiness","_id","products","product","productIndex","getCoverByProduct","length","setState","error","render","cards","push","buildCard","name","insurance","anualPayment"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport BusinessService from '../services/business';\nimport ProductService from '../services/product';\nimport CoverService from '../services/cover';\nimport ProductCard from './ProductCard';\n\nclass Comparison extends Component{\n    constructor(props){\n        super(props);\n        this.businessService = new BusinessService();\n        this.productService = new ProductService();\n        this.coverService = new CoverService();\n        this.businessList = [];\n\n        this.state = {\n            businesses: []\n        }\n    }\n\n    componentWillMount(){\n        this.businessService.getAllBusinesses().then((response) => {\n            this.businessList = response.data;\n            console.log('RESPONSE: ', this.businessList);\n            this.businessList.forEach((business, businessIndex) => {\n                this.productService.getProductsByBusiness(business._id).then(response => {\n                    business['products'] = response.data;\n                    console.log('RESPONSE: ', business['products']);\n                    business.products.forEach((product, productIndex) => {\n                        this.coverService.getCoverByProduct(product._id).then(response => {\n                            product['covers'] = response.data;\n                            console.log('RESPONSE: ', product['covers']);\n                            console.log('INDEX: ', businessIndex);\n                            console.log('COMPARISON: ', this.businessList.length-1);\n                            console.log('INDEX: ', productIndex);\n                            console.log('COMPARISON: ', this.businessList.length-1);\n                            if(businessIndex === (business.products.length-1)){\n                                console.log('ENTRE AL PRIMER IF');\n                                if(productIndex === (business.products.length-1)){\n                                    console.log('ENTRE AL SEGUNDO IF');\n                                    this.setState({businesses: this.businessList});\n                                }\n                            }\n                        }, error => {\n                            console.log('[ERROR]', error);\n                        });\n                    });\n                }, error => {\n                    console.log('[ERROR]', error);\n                })\n            });\n        }, (error) => {\n            console.log('[ERROR]', error);\n        })\n    }\n\n    render(){\n        let cards = [];\n\n        this.state.businesses.forEach(business => {\n            this.state.businesses.products.forEach(product => {\n                cards.push(this.buildCard(business,product));\n            });\n        });\n\n        return <div>{cards}</div>\n    }\n\n    buildCard(business, product){\n        return <ProductCard\n        business = {business.name}\n        insurance = {product.insurance}\n        payment = {product.anualPayment}/>\n    }\n}\n\nexport default Comparison;"]},"metadata":{},"sourceType":"module"}